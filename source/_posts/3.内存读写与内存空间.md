---
title: 3.内存读写与内存空间
thumbnail: https://blog.zhangruipeng.me/hexo-theme-icarus/gallery/covers/vector_landscape_1.svg
toc: true
original: https://www.cnblogs.com/liuxianan/p/chrome-plugin-develop.html#api%E6%80%BB%E7%BB%93
categories:
- 汇编语言
tags:
- 汇编指令
- 汇编语言
---

### CPU对存储器的读写
CPU想要进行数据的读写，必须和外部期间进行三类信息的交互：
- 存储单元的地址(地址信息)
    - 也就是你要在什么地方操作
- 器件的选择，读或写命令(控制信息)
    - 也就是你要在存储单元上干什么，读或者写 
- 读或写的数据(数据信息)
    - 你要操作什么数据

比如说，我要在 `0xF`(地址信息) 这个地址的存储单元上写入(控制信息) `0xF1`(数据信息) 的数据。那么他的流程大概就是这样的：
1. CPU读取我们的地址信息 `0xF` 然后通过地址总线找到内存中这个地址指向的存储单元
2. 通过控制总线进行控制读或者写的操作，我们这里是写入，所以就是发出写的操作指令
3. 通过数据总线把数据给出去

### 内存地址空间
从上面CPU对存储器的操作中发现，我们对存储单元的读写会通过地址总线找到相应的地址，那么这个地址是如何找到的呢？这时候就引出了内存地址空间的概念。

CPU地址总线宽度为N，寻址空间就是2的N次方的字节。8086CPU的地址总线为20，它可以寻址1M个内存单元，这1MB个可寻到的内存单元就构成这个CPU的内存地址空间。

从CPU角度看地址空间分配：
- RAM(随机存储器)
    - 特点：能读能写，缺点就是当机器一断电，里面的信息就会全部丢失，一般 `RAM` 存储的数据就是在计算机运行时动态变化的数据
    - RAM有很多种类，主要有插入主板上的RAM和拓展槽上的RAM(比如显卡)
- ROM(只读存储器)
    - 只能从里面读数据，而不能进行写数据，它里面的数据是在造计算机时就已经写好了，相当于在制造计算机时在里面定义了很多 `final` 的常量，一般存储在计算器启动时就需要用的数据或者在使用时固定的不变的数据。
    - 主要是系统BIOS，接口卡上的BIOS

[![B4qbt0.png](https://s1.ax1x.com/2020/11/07/B4qbt0.png)](https://imgchr.com/i/B4qbt0)
> 在上图中，有绿色底座的代表插在拓展槽上的存储器，没有绿色底座的代表插在主板上的存储器

现在我们将各类存储器看作为一个逻辑存储器，也就是我们把它们想象成一个整体，然后进行统一编址(存储地址)，多个物理存储器我们把它们看作一个其中由若干存储单元组成的逻辑存储器。每个物理存储器在这个逻辑存储器中占有一个地址段，也就是一段地址空间。

这个时候我们就不需要考虑我们要操作什么设备的什么地址了，直接说你要操作什么地址，自然那个地址就是相应的存储器的。

比如说：有内存还有显存，那么把它们想象成一个整体，其中内存占有位置从0-15，显存占有位置16-30，那么现在我说我要读写内存地址为17的主存储器，那么是不是自然而然就知道我是要操作显存而不是内存。

[![B4jKE9.png](https://s1.ax1x.com/2020/11/07/B4jKE9.png)](https://imgchr.com/i/B4jKE9)

在上图中，我们把各种类型`RAM`、`ROM`，都看作一个整体，每个存储器又占有一段地址空间，当我们操作具体某个地址段时自然而然就知道是在操作谁。

###### 8086系统案例：

[![B5CMLV.png](https://s1.ax1x.com/2020/11/07/B5CMLV.png)](https://imgchr.com/i/B5CMLV)

-----
注：`BIOS` 就是固化到ROM芯片的程序，保存着计算机最重要、最基本的输入输出程序，系统自启动，自检程序，为计算机提供了最底层的，最直接的硬件设置和控制。此外还向作业系统提供了一些系统参数。系统硬件的变化是由BIOS隐藏，程序使用BIOS功能而不是直接控制硬件。现代作业系统会忽略BIOS提供的抽象层并直接控制硬件组件。

来源：https://baike.baidu.com/item/bios/91424

